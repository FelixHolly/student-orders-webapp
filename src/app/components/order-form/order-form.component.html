<div class="order-form">
  <h3>Add New Order</h3>

  @if (!studentId) {
    <div class="info-message">
      Please select a student to create an order.
    </div>
  }

  @if (errorMessage()) {
    <div class="error-message">
      {{ errorMessage() }}
    </div>
  }

  <form [formGroup]="orderForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="total">Total Amount *</label>
      <input
        type="number"
        id="total"
        formControlName="total"
        [class.error]="hasError('total')"
        placeholder="0.00"
        step="0.01"
        min="0.01"
        autofocus
      />
      @if (hasError('total')) {
        <div class="field-error">
          {{ getFieldError('total') }}
        </div>
      }
    </div>

    <div class="form-group">
      <label for="status">Status *</label>
      <select
        id="status"
        formControlName="status"
        [class.error]="hasError('status')"
      >
        <option value="pending">Pending</option>
        <option value="paid">Paid</option>
      </select>
      @if (hasError('status')) {
        <div class="field-error">
          {{ getFieldError('status') }}
        </div>
      }
    </div>

    <button
      type="submit"
      [disabled]="orderForm.invalid || submitting() || !studentId"
      class="btn-primary"
    >
      @if (!submitting()) {
        <span>Create Order</span>
      } @else {
        <span>Creating...</span>
      }
    </button>
  </form>
</div>
