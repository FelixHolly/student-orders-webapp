<div class="student-form">
  <h3>{{ isEditMode ? 'Edit Student' : 'Add New Student' }}</h3>

  @if (errorMessage()) {
    <div class="error-message">
      {{ errorMessage() }}
    </div>
  }

  <form [formGroup]="studentForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="name">Name *</label>
      <input
        type="text"
        id="name"
        formControlName="name"
        [class.error]="hasError('name')"
        placeholder="Enter student name"
        autofocus
      />
      @if (hasError('name')) {
        <div class="field-error">
          {{ getFieldError('name') }}
        </div>
      }
    </div>

    <div class="form-group">
      <label for="grade">Grade *</label>
      <input
        type="text"
        id="grade"
        formControlName="grade"
        [class.error]="hasError('grade')"
        placeholder="e.g., 10th Grade"
      />
      @if (hasError('grade')) {
        <div class="field-error">
          {{ getFieldError('grade') }}
        </div>
      }
    </div>

    <div class="form-group">
      <label for="school">School *</label>
      <input
        type="text"
        id="school"
        formControlName="school"
        [class.error]="hasError('school')"
        placeholder="Enter school name"
      />
      @if (hasError('school')) {
        <div class="field-error">
          {{ getFieldError('school') }}
        </div>
      }
    </div>

    <div class="form-actions">
      <button
        type="button"
        class="btn-secondary"
        (click)="onCancel()"
      >
        Cancel
      </button>
      <button
        type="submit"
        [disabled]="studentForm.invalid || submitting()"
        class="btn-primary"
      >
        @if (!submitting()) {
          <span>{{ isEditMode ? 'Save Changes' : 'Create Student' }}</span>
        } @else {
          <span>{{ isEditMode ? 'Saving...' : 'Creating...' }}</span>
        }
      </button>
    </div>
  </form>
</div>
